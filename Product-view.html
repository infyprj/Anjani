<div class="container mt-4">
  <!-- Search Bar -->
  <div class="row mb-3">
    <div class="col-md-8">
      <input type="text" class="form-control" placeholder="Search Products..."
        [(ngModel)]="searchTerm" (keyup.enter)="searchProducts()" />
    </div>
    <div class="col-md-4">
      <button class="btn btn-primary" (click)="searchProducts()">Search</button>
    </div>
  </div>

  <!-- Category Filter -->
  <div class="row mb-3">
    <div class="col-md-4">
      <select class="form-control" [(ngModel)]="selectedCategoryId" (change)="filterByCategory()">
        <option value="">All Categories</option>
        <option *ngFor="let cat of categories" [value]="cat.CategoryID">{{cat.Name}}</option>
      </select>
    </div>
  </div>

  <!-- Products Display -->
  <div *ngIf="products.length === 0" class="alert alert-info text-center">
    No products available.
  </div>

  <div class="row">
    <div *ngFor="let product of products" class="col-md-4 mb-4">
      <div class="card h-100">
        <img [src]="product.ThumbnailURL" class="card-img-top" alt="{{product.Name}}" />
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{product.Name}}</h5>
          <p class="card-text">{{product.Description}}</p>
          <p class="card-text"><strong>Price:</strong> {{product.Price | currency}}</p>
          <div class="mt-auto">
            <!-- Update & Delete Buttons for Admin -->
            <div *ngIf="isAdmin" class="d-flex justify-content-between">
              <button class="btn btn-sm btn-warning" (click)="updateProduct(product)">Update</button>
              <button class="btn btn-sm btn-danger" (click)="deleteProduct(product)">Delete</button>
            </div>
            <!-- For other users, just show the model or options -->
            <!-- Optional: Add "View" button to see details or 3D model -->
            <button class="btn btn-sm btn-info mt-2" (click)="viewProduct(product)">View Model</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
